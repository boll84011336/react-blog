{"version":3,"sources":["utils.js","WebAPI.js","contexts.js","pages/LoginPage/LoginPage.js","components/Paginator/Paginator.js","pages/HomePage/HomePage.js","pages/ArticlePage/ArticlePage.js","pages/NewPostPage/NewPostPage.js","pages/RegisterPage/RegisterPage.js","components/Header/Header.js","components/App/App.js","index.js"],"names":["TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","BASE_URL","login","username","password","fetch","method","headers","body","JSON","stringify","then","res","json","getMe","AuthContext","createContext","LoadingContext","ErrorMessage","styled","div","LoginPage","setUser","useContext","useState","setUsername","setPassword","errorMessage","setErrorMessage","Navigate","useNavigate","onSubmit","e","data","ok","message","response","toString","value","onChange","target","type","Container","Button","button","Footer","Paginator","page","handlePageClick","onClick","Root","ContainerBody","PostContainer","PostTitle","Link","PostDate","p","Information","pStyle","paddingLeft","Post","post","to","id","title","style","user","nickname","Date","createdAt","toLocaleString","HomePage","posts","setPosts","totalPage","setTotalPage","setPage","totalPost","Number","length","Math","ceil","useEffect","getPagePosts","console","log","window","scrollTo","top","behavior","map","h1","PostBody","Loading","onDelete","ArticlePage","setPost","isLoading","setIsLoading","navigate","useParams","getPost","catch","err","authorization","removePost","Form","form","TitleInput","input","ContentTextarea","textarea","NewPostPage","setTitle","content","setContent","handleSubmit","createPost","rows","setNickname","register","Banner","HeaderContainer","Brand","NavbarList","Nav","props","$active","LeftContainer","Header","location","useLocation","className","pathname","App","Provider","path","element","ReactDOM","render","theme","colors","primary_300","primary_400","primary_500","document","getElementById"],"mappings":"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","file":"static/js/main.cf5a234c.chunk.js","sourcesContent":["const TOKEN_NAME = \"token\";\n\nexport const setAuthToken = (token) => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME);\n};","import { getAuthToken } from \"./utils\";\n\nconst BASE_URL = \"https://student-json-api.lidemy.me\";\n\nexport const getPosts = () => {\n  return fetch(`${BASE_URL}/posts?_expand=user&_sort=createdAt&_order=desc`)\n  .then((res) => res.json()\n  );\n};\n\nexport const getPost = (id) => {\n  return fetch(`${BASE_URL}/posts/${id}?_expand=user`).then((res) =>\n    res.json()\n  );\n};\n\nexport const removePost = (id) => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts/${id}`, {\n    method: \"DELETE\",\n    headers: {\n      authorization: `Bearer ${token}`,\n      \"content-type\": \"application/json\",\n    },\n  }).then((res) => res.json());\n};\n\nexport const login = (username, password) => {\n  return fetch(`${BASE_URL}/login`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  })\n  .then(res => res.json())\n}\n\n\n//getMe 紀錄登入資訊\nexport const getMe = () => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/me`, {\n    headers: {\n      'authorization': `Bearer ${token}`\n    }\n  })\n  .then(res => res.json())\n}\n\n//POST \nexport const createPost = (title, body) => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({\n      title,\n      body,\n    }),\n  }).then((res) => res.json());\n}\n\n//註冊\nexport const register = (nickname, username, password) => {\n  return fetch(`${BASE_URL}/register`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      nickname,\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\n//取得分頁\nexport const getPagePosts = (page) => {\n  return fetch(`${BASE_URL}/posts?_expand=user&_sort=createdAt&_order=desc&_page=${page}&_limit=5`)\n  .then((res) => res.json()\n  );\n};","import { createContext } from \"react\";\n\nexport const AuthContext = createContext(null)\nexport const LoadingContext = createContext(null);\nexport const PageContext = createContext(null);","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"react-router-dom\";\nimport { login, getMe } from \"../../WebAPI\";\nimport { setAuthToken } from \"../../utils\";\nimport { AuthContext } from \"../../contexts\";\n\n\nconst ErrorMessage = styled.div`\n  color:red\n`\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext)\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const Navigate = useNavigate()\n\n  const handleInputChange =(e) => {\n    setUsername(e.target.value)\n  }\n\n  const handleSubmit = (e) => {\n    setErrorMessage(null)\n    login(username, password).then(data => {\n      if(data.ok === 0) {\n        return setErrorMessage(data.message)\n      }\n      setAuthToken(data.token)\n\n      getMe().then(response => {\n        if (response.ok !== 1) {\n          setAuthToken(null);\n          return setErrorMessage(response.toString());\n        }\n        setUser(response.data)\n        Navigate(\"/\");\n      })    \n    })\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        username: {\" \"}\n        <input value={username} onChange={handleInputChange}/>\n      </div>\n      <div>\n        password: {\" \"}\n        <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)}/>\n      </div>\n      <button>登入</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </form>\n  );\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\nconst Container = styled.div`\n  text-align: center;\n`;\n\nconst Button = styled.button`\n  font-size: 8px;\n  border-radius: 5px;\n  padding: 12px;\n  background: transparent;\n  color: black;\n  border: 1px solid #00BFFF;\n  cursor: pointer;\n  &:active {\n    background: #00BFFF;\n  }\n  & + & {\n    margin-left: 10px;\n  }\n`;\n\nconst Footer = styled.div`\n  padding-top: 36px;\n`\n\n\n\nexport default function Paginator({ page, handlePageClick}) {\n  return (\n    <><Container>\n      <Button onClick={() => {handlePageClick(\"First\")}}>第一頁</Button>\n      <Button onClick={() => {handlePageClick(\"Prev\")}}>上一頁</Button>\n      {page}\n      <Button onClick={() => {handlePageClick(\"Next\")}}>下一頁</Button>\n      <Button onClick={() => {handlePageClick(\"Last\")}}>最末頁</Button>\n    </Container>\n    <Footer>    \n    </Footer></>\n  );\n}\n\n\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nimport { Link } from \"react-router-dom\";\nimport { getPosts, getPagePosts } from \"../../WebAPI\";\nimport Paginator from \"../../components/Paginator\"\n// import { PageContext } from \"../../context\";\n\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n`;\n\nconst ContainerBody = styled.div`\n  \n  padding: 20px 40px 30px 40px;\n  max-width: 800px;\n  margin: 30px auto;\n  font-size: 20px;\n  @media screen and (max-width: 768px) {\n    margin: 100px auto;\n    overflow: hidden;\n  }\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n \n`;\n\nconst PostTitle = styled(Link)`\n  margin: 3px 20px;\n  font-size: 28px;\n  font-weight: 600;\n  color: #333;\n  text-decoration: none;\n`;\n\nconst PostDate = styled.p`\n  color: rgba(0, 0, 0, 0.8);\n  margin-left: 10px;\n  font-size: 16px;\n`; \nconst Information = styled.div`\n  width: 700px; \n  display: flex;\n  align-items: center;\n  margin: 3px 30px;\n  padding-left: 5px;\n`\n\nconst pStyle = {\n  paddingLeft: \"10px\",\n}\n\nfunction Post({ post }) {\n  return (\n    <><ContainerBody>\n      <PostContainer>\n        <PostTitle to={`/posts/${post.id}`}>{post.title}</PostTitle>      \n      </PostContainer>\n      <Information>\n        <p>Posted by</p> <p style={pStyle}>{post.user.nickname}</p>\n        <p style={pStyle}>on</p><PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate> \n      </Information>\n    </ContainerBody></>\n  );\n}\n\nPost.propTypes = {\n  post: PropTypes.object,\n};\n\n//這邊是我的首頁\nexport default function HomePage() {\n  const [posts, setPosts] = useState([]);\n  const [totalPage, setTotalPage] = useState(); //全部共有幾頁\n  const [page, setPage] = useState(1); //控制現在要去第幾頁 ， 當前頁數\n\n  getPosts().then((data) => {\n    const totalPost = Number(data.length); //總共幾筆\n    setTotalPage(Math.ceil(totalPost / 5)); //共幾頁\n  });\n\n  useEffect(() => { \n    getPagePosts(page).then(posts => {\n      setPosts(posts)\n      console.log(posts)\n    });\n    window.scrollTo({ \n      top: 0, \n      behavior: \"smooth\" \n    });\n  }, [page]);\n\n  const handlePageClick = (button) => {     \n      if (button === \"First\") {  \n        return setPage(1);\n      }\n\n      if (button === \"Prev\" && page > 1) {   \n        return setPage(page - 1);\n      }\n\n      if (button === \"Next\" && page < totalPage) {\n        return setPage(page + 1);\n      }\n\n      if (button === \"Last\") {\n        return setPage(totalPage);\n      }\n  };\n  // useEffect(() => {\n  //   getPosts().then((posts) => {\n  //     setPosts(posts)\n  //   });\n  // }, []);\n\n  return (\n    <Root>\n      {posts.map((post) => (\n        <Post key={post.id} post={post} />\n      ))}\n      <Paginator page={page} handlePageClick={handlePageClick}/>\n    </Root>\n  );\n}\n\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nimport { useParams, useNavigate  } from \"react-router-dom\";\nimport { getPost, removePost } from \"../../WebAPI\";\n\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  \n`;\n\nconst PostTitle = styled.h1``;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`;\n\nconst PostBody = styled.p`\n  white-space: pre-wrap;\n  \n`;\n\nconst Loading = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: black;\n  font-size: 24px;\n  background: rgba(0, 0, 0, 0.3);\n`;\n\nfunction Post({ post, onDelete }) {\n  if (!post) return null;\n  return (\n    <PostContainer>\n      <PostTitle>{post.title}</PostTitle>\n      <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n      <PostBody>{post.body}</PostBody> \n      <button onClick={onDelete}>刪除</button>\n\n    </PostContainer>\n  );\n}\n\nPost.propTypes = {\n  post: PropTypes.object,\n};\n\nexport default function ArticlePage() {\n  const [post, setPost] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const { id } = useParams();\n\n  const handleDelete = () => {\n    removePost(id).then(() => {\n      navigate('/');\n    });\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n    getPost(id)\n      .then((post) => {\n        setIsLoading(false);\n        setPost(post);\n      })\n      .catch((err) => {\n        setIsLoading(false);\n      });\n  }, [id]);\n\n  return (\n    <Root>\n      <Post post={post} onDelete={handleDelete} />\n      {isLoading && <Loading>載入中</Loading>}\n    </Root>\n  );\n}","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"react-router-dom\";\nimport {createPost} from \"../../WebAPI\";\n\n\nconst Form = styled.form`\n  border: solid 3px black;\n  padding: 20px 40px 60px 40px;\n  max-width: 800px;\n  margin: 30px auto;\n  font-size: 20px;\n  @media screen and (max-width: 768px) {\n    margin: 100px auto;\n    overflow: hidden;\n  }\n`;\n\nconst TitleInput = styled.input`\n  margin-bottom: 12px;\n  width: 100%;\n  font-size: 16px;\n  padding: 10px;\n`;\n\nconst ContentTextarea = styled.textarea`\n  width: 100%;\n  font-size: 16px;\n  padding: 12px;\n`;\n\n\nconst Button = styled.button`\n  padding: 12px;\n  background: #ff8100;\n  color: white;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n  float: right;\n  &:hover {\n    background: #ff8100;\n  }\n  & + & {\n    margin-left: 5px;\n  }\n`;\n\nexport default function NewPostPage() {\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const Navigate = useNavigate()\n\n\n  const handleSubmit = (e) => {\n    createPost(title, content).then(data => {\n      console.log(data)\n      if (data.id) {\n        Navigate(\"/\");\n      }     \n    })\n  }\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      Title:{\" \"}<TitleInput value={title} onChange={(e) => setTitle(e.target.value)} />\n      Content:{\" \"}<ContentTextarea rows=\"20\" value={content} onChange={(e) => setContent(e.target.value)} />\n      <Button onClick={handleSubmit}>submit</Button>\n    </Form>\n  );\n}\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"react-router-dom\";\nimport { login, getMe, register} from \"../../WebAPI\";\nimport { setAuthToken } from \"../../utils\";\nimport { AuthContext } from \"../../contexts\";\n\n\nconst ErrorMessage = styled.div`\n  color:red\n`\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext)\n\n  const [nickname, setNickname] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"Lidemy\");\n  const [errorMessage, setErrorMessage] = useState();\n  const Navigate = useNavigate()\n\n\n  const handleSubmit = (e) => {\n    setErrorMessage(null)\n    register(nickname, username, password).then(data => {\n      console.log(data)\n      if(data.ok === 0) {\n        return setErrorMessage(data.message)\n      }\n      login(username, password).then(data => {\n        if(data.ok === 0) {\n          return setErrorMessage(data.message)\n        }\n        setAuthToken(data.token)\n  \n        getMe().then(response => {\n          if (response.ok !== 1) {\n            setAuthToken(null);\n            return setErrorMessage(response.toString());\n          }\n          setUser(response.data)\n          Navigate(\"/\");\n        })    \n      })\n    })\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        nickname: {\" \"}\n        <input value={nickname} onChange={(e) => setNickname(e.target.value)}/>\n      </div>\n      <div>\n        username: {\" \"}\n        <input value={username} onChange={(e) => setUsername(e.target.value)}/>\n      </div>\n      <div>\n        password: {\" \"}\n        <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)}/>\n      </div>\n      <button>註冊</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </form>\n  );\n}\n\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { AuthContext, LoadingContext } from \"../../contexts\";\nimport { setAuthToken } from \"../../utils\"\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\nimport { Link, useNavigate, useLocation} from \"react-router-dom\";\n\nconst Banner = styled.div``\n\nconst HeaderContainer = styled.div`\n  height: 80px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding:0px 32px;\n  box-sizing: border-box;\n  background:\t#F5F5F5;\n`;\n\nconst Brand = styled.div`\nfont-style:oblique;\nfont-size:10px;\nfont-weight: bold;\n`;\n\nconst NavbarList = styled.div`\n  display: flex;\n  align-items: center;\n  height: 80px;\n`;\n\nconst Nav = styled(Link)` \n  font-size: 20px;\n  font-weight: 600;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  ${(props) =>\n    props.$active &&\n    `\n    background: \t#B0C4DE;\n  `} \n`\n\n\nconst LeftContainer = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${NavbarList} {\n    margin-left: 64px;\n  }\n`;\n\n\nexport default function Header() {\n  const { isLoading } = useContext(LoadingContext);\n  const location = useLocation()\n  const Navigate = useNavigate()\n  const { user, setUser } = useContext(AuthContext)\n\n  const handleLogout = () => {\n    setAuthToken('');\n    setUser(null);\n    Navigate(\"/\");\n  }\n\n  return (\n    <><HeaderContainer className=\"navbar fixed-top navbar-light\">\n      <LeftContainer>\n        <Brand to=\"/\">Blog</Brand>\n        <NavbarList className=\"navbar-fixed-top\">\n          <Nav to=\"/\" $active={location.pathname === \"/\"}>首頁</Nav>\n          {user && <Nav to=\"/new-post\" $active={location.pathname === \"/new-post\"}>發布文章</Nav>}\n        </NavbarList>\n      </LeftContainer>\n      {!isLoading && (\n        <NavbarList className=\"navbar-fixed-top\">\n          {!user && <Nav to={\"/register\"} $active={location.pathname === \"/register\"}>註冊</Nav>}\n          {!user && <Nav to=\"/login\" $active={location.pathname === \"/login\"}>登入</Nav>}\n          {user && <Nav to=\"/login\" onClick={handleLogout}>登出</Nav>}\n        </NavbarList>\n      )}\n    </HeaderContainer>\n    <Banner>\n    <div className=\"top-banner\">\n      <div className=\"top-banner__info\">\n        <h1 className=\"top-banner__sub-title\">WELCOME TO MY BLOG</h1>\n      </div>\n    </div>\n    </Banner></>\n    \n    \n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { HashRouter as Router, Routes, Route} from \"react-router-dom\";\nimport LoginPage from \"../../pages/LoginPage\";\nimport HomePage from \"../../pages/HomePage\";\nimport ArticlePage from \"../../pages/ArticlePage\";\nimport NewPostPage from \"../../pages/NewPostPage\";\nimport RegisterPage from \"../../pages/RegisterPage\";\nimport Header from \"../Header\";\nimport { AuthContext, LoadingContext } from \"../../contexts\";\nimport { getMe } from \"../../WebAPI\";\nimport { getAuthToken } from \"../../utils\";\n\nconst Root = styled.div`\n  padding-top: 64px;\n`;\n\n\nfunction App() {\n  const [user, setUser] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n  \n  useEffect(() => {\n    if (getAuthToken()) {\n      getMe().then((response) => {\n        setIsLoading(false);\n        if (response.ok) {\n          setUser(response.data);\n          setIsLoading(false)\n        }\n      });\n    } else {\n      setIsLoading(false);\n    }\n  },[]);\n\n  return (\n    <AuthContext.Provider value={{ user, setUser }}>\n      <LoadingContext.Provider value={{ isLoading, setIsLoading }}>\n      <Root>\n        <Router>\n          <Header />\n          <Routes>\n            <Route path=\"/\" element={<HomePage />} />\n            <Route path=\"/login\" element={<LoginPage />} />\n            <Route path=\"/register\" element={<RegisterPage />} />\n            <Route path=\"/posts/:id\" element={<ArticlePage />}></Route>\n            <Route path=\"/new-post\" element={<NewPostPage />}></Route>\n          </Routes>\n        </Router>\n      </Root>\n      </LoadingContext.Provider>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport { ThemeProvider } from \"styled-components\";\n\nconst theme = {\n  colors: {\n    primary_300: \"#3333dd\",\n    primary_400: \"#e33e3e\",\n    primary_500: \"#af0505\",\n  },\n};\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <App />\n  </ThemeProvider>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}